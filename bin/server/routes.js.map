{"version":3,"sources":["../../src/server/routes.js"],"names":["userController","require","bookController","loanController","reviewController","tagController","mongoose","User","model","checkToken","module","exports","app","post","login","create","get","list","delete","destroy","put","edit","validate","req","res","next","findOne","_id","then","user","json","email","admin","userID","catch","err"],"mappings":"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","sourcesContent":["const userController = require(\"./Controllers/User.js\");\nconst bookController = require(\"./Controllers/Book.js\");\nconst loanController = require(\"./Controllers/Loan.js\");\nconst reviewController = require(\"./Controllers/Review.js\");\nconst tagController = require(\"./Controllers/Tag.js\");\n\nconst mongoose = require(\"mongoose\");\nconst User = mongoose.model(\"user\");\nconst checkToken = require(\"../server/jwt/auth\");\n\nmodule.exports = function(app) {\n    // user\n    app.post(\"/login\", userController.login);\n    app.post(\"/create\", userController.create);\n    app.get(\"/users\", userController.list);\n    app.delete(\"/users/:id\", userController.destroy);\n    app.put(\"/users/:id\", userController.edit);\n    // booklist\n    app.get(\"/books\", bookController.list);\n    app.post(\"/books\", bookController.create);\n    app.put(\"/books/:id\", bookController.edit);\n    app.delete(\"/books/:id\", bookController.destroy);\n    // review\n    app.get(\"/reviews\", reviewController.list);\n    app.post(\"/reviews\", reviewController.create);\n    app.put(\"/reviews/:id\", reviewController.edit);\n    app.delete(\"/reviews/:id\", reviewController.destroy);\n    // loan\n    app.get(\"/loans\", loanController.list);\n    app.post(\"/loans\", loanController.create);\n    app.put(\"/loans/:id\", loanController.edit);\n    app.delete(\"/loans/:id\", loanController.destroy);\n    // tag\n    app.get(\"/tags\", tagController.list);\n    app.post(\"/tags\", tagController.create);\n    app.put(\"/tags/:id\", tagController.edit);\n    app.delete(\"/tags/:id\", tagController.destroy);\n\n    app.get(\"/auth\", checkToken.validate, (req, res, next) => {\n        User.findOne({_id: req._id})\n            .then(user => {\n                res.json({\n                    email: user.email,\n                    admin: user.admin,\n                    userID: user._id,\n                });\n            })\n            .catch(err => next(err));\n    });\n};\n"],"file":"routes.js"}